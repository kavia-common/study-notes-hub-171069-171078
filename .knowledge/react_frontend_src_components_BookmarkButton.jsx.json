{"is_source_file": true, "format": "JavaScript (JSX/React)", "description": "This file defines a React functional component named BookmarkButton, which provides a UI button for toggling bookmarks on notes. It interacts with a Supabase backend to persist bookmark status per user and updates the bookmark count accordingly. The component manages state for bookmarked status, count, loading state, and error handling, and includes styling logic based on size and bookmarking state.", "external_files": ["../lib/supabaseClient", "../context/AuthContext.jsx"], "external_methods": ["getSupabaseClient", "useAuth"], "published": [], "classes": [], "methods": [{"name": "BookmarkButton({ noteId, initialCount = 0, onCountChange, size = 'md', className = '', })", "description": "React component that renders a bookmark toggle button for a note, manages bookmark state, and synchronizes with the Supabase backend.", "scope": "", "scopeKind": ""}, {"name": "onToggle()", "description": "Handles the toggle action, updates local state optimistically, calls persistBookmark, and manages error handling.", "scope": "BookmarkButton", "scopeKind": "function"}, {"name": "persistBookmark", "description": "Performs database operations to add or remove a bookmark for the user and updates the notes' bookmark count."}, {"name": "fetchBookmarked()", "scope": "BookmarkButton", "scopeKind": "function", "description": "unavailable"}], "calls": ["getSupabaseClient()", "useAuth()", "supabase.from('notes_bookmarks').select('id')", "supabase.from('notes_bookmarks').insert()", "supabase.from('notes_bookmarks').delete()", "supabase.from('notes').update()"], "search-terms": ["React BookmarkButton component", "Supabase bookmark toggle", "notes_bookmarks table", "notes table bookmarks count", "React useEffect for bookmark status"], "state": 2, "file_id": 48, "knowledge_revision": 109, "git_revision": "", "ctags": [{"_type": "tag", "name": "BookmarkButton", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^export default function BookmarkButton({$/", "language": "JavaScript", "kind": "function", "signature": "({ noteId, initialCount = 0, onCountChange, size = 'md', className = '', })"}, {"_type": "tag", "name": "bookmarked", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        aria-pressed={bookmarked}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "btn ghost ${className || ''}", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        className={`btn ghost ${className || ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "busy", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        disabled={busy}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "fetchBookmarked", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^    async function fetchBookmarked() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BookmarkButton", "scopeKind": "function"}, {"_type": "tag", "name": "label", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        aria-label={label}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "label", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        title={label}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "onToggle", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        onClick={onToggle}$/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onToggle", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^  async function onToggle() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "BookmarkButton", "scopeKind": "function"}, {"_type": "tag", "name": "styles", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/components/BookmarkButton.jsx", "pattern": "/^        <span aria-hidden style={styles.icon}>{bookmarked ? '\ud83d\udd16' : '\ud83d\udd16'}<\\/span>$/", "language": "JavaScript", "kind": "field", "scope": "AnonymousClassd79021da0201", "scopeKind": "class"}], "hash": "586d436b38102d75b2643995f33fab9b", "format-version": 4, "code-base-name": "react_frontend", "filename": "react_frontend/src/components/BookmarkButton.jsx", "fields": [{"name": "aria-pressed={bookmarked}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "className={`btn ghost ${className || ''}`}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={busy}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={label}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={label}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "onClick={onToggle}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "<span aria-hidden style={styles.icon}>{bookmarked ? '\ud83d\udd16' : '\ud83d\udd16'}<\\/span>", "scope": "AnonymousClassd79021da0201", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"109": ""}]}