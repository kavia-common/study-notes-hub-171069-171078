{"is_source_file": true, "format": "JavaScript/JSX (React)", "description": "React component for displaying detailed view of a note, including metadata, actions (like, bookmark, download), PDF preview, and author info. It fetches note data from a Supabase backend and manages user interactions.", "external_files": ["../lib/supabaseClient", "../components/PdfPreview.jsx", "../context/AuthContext.jsx", "../components/LikeButton.jsx", "../components/BookmarkButton.jsx", "../components/UserAvatar.jsx", "react", "react-router-dom", "date-fns"], "external_methods": ["useParams", "useNavigate", "Link", "formatDistanceToNow", "getSupabaseClient", "useAuth", "PdfPreview", "useCallback", "useEffect", "useMemo", "useState"], "published": ["NoteDetails"], "classes": [], "methods": [{"name": "fetchNote", "description": "Fetches a note by ID from the database and updates local state."}, {"name": "safeUpdateCounts(patch)", "description": "Optimistically updates note counts locally and syncs with the backend.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "handleLike()", "description": "Increments the like count for the note.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "handleBookmark()", "description": "Increments the bookmark count for the note.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "handleDownload()", "description": "Generates a signed URL for the PDF, triggers download, and increments download count.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "NoteDetails()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["supabase.from('notes').select('*').eq('id', id).single()", "supabase.from('notes').update(patch).eq('id', id)", "supabase.storage.from('notes').createSignedUrl(note.pdf_path, 300, { download: true })", "navigate('/browse')", "setNote", "setLoading", "setErr", "setLikeBusy", "setBookmarkBusy", "setDownloadBusy", "console.error", "useParams()", "useNavigate()", "useAuth()", "formatDistanceToNow"], "search-terms": ["NoteDetails", "PDF preview", "signed URL", "supabase", "React component", "note metadata", "download note", "like note", "bookmark note"], "state": 2, "file_id": 46, "knowledge_revision": 114, "git_revision": "35c40cd7841f75d3b4b8648c69716d56469d4188", "revision_history": [{"104": ""}, {"113": "35c40cd7841f75d3b4b8648c69716d56469d4188"}, {"114": "35c40cd7841f75d3b4b8648c69716d56469d4188"}], "ctags": [{"_type": "tag", "name": "600", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            signedSeconds={600}$/", "language": "JavaScript", "kind": "field", "scope": "signedSeconds", "scopeKind": "class"}, {"_type": "tag", "name": "720", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            height={720}$/", "language": "JavaScript", "kind": "field", "scope": "height", "scopeKind": "class"}, {"_type": "tag", "name": "NoteDetails", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^export default function NoteDetails() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleBookmark", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function handleBookmark() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteDetails", "scopeKind": "function"}, {"_type": "tag", "name": "handleDownload", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function handleDownload() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteDetails", "scopeKind": "function"}, {"_type": "tag", "name": "handleLike", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function handleLike() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteDetails", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^              noteId={note.id}$/", "language": "JavaScript", "kind": "field", "scope": "noteId", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            fileName={note.title ? `${note.title}.pdf` : 'note.pdf'}$/", "language": "JavaScript", "kind": "field", "scope": "fileName", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            path={note.pdf_path}$/", "language": "JavaScript", "kind": "field", "scope": "path", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^          {note?.user_id ? <UserAvatar userId={note.user_id} size={44} \\/> : null}$/", "language": "JavaScript", "kind": "field", "scope": "note.user_id", "scopeKind": "class"}, {"_type": "tag", "name": "safeUpdateCounts", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function safeUpdateCounts(patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(patch)", "scope": "NoteDetails", "scopeKind": "function"}], "hash": "cb3a9c9525c1d0c8a16853b68706b25e", "format-version": 4, "code-base-name": "react_frontend", "filename": "react_frontend/src/pages/NoteDetails.jsx", "fields": [{"name": "signedSeconds={600}", "scope": "signedSeconds", "scopeKind": "class", "description": "unavailable"}, {"name": "height={720}", "scope": "height", "scopeKind": "class", "description": "unavailable"}, {"name": "noteId={note.id}", "scope": "noteId", "scopeKind": "class", "description": "unavailable"}, {"name": "fileName={note.title ? `${note.title}.pdf` : 'note.pdf'}", "scope": "fileName", "scopeKind": "class", "description": "unavailable"}, {"name": "path={note.pdf_path}", "scope": "path", "scopeKind": "class", "description": "unavailable"}, {"name": "{note?.user_id ? <UserAvatar userId={note.user_id} size={44} \\/> : null}", "scope": "note.user_id", "scopeKind": "class", "description": "unavailable"}]}