{"is_source_file": true, "format": "JavaScript/JSX", "description": "React component for displaying detailed information about a single note, including title, metadata, actions (like, bookmark, download), PDF preview, and owner info. It fetches note data from Supabase, manages optimistic UI updates, and handles user interactions.", "external_files": ["../lib/supabaseClient", "../components/PdfPreview.jsx", "../context/AuthContext.jsx", "../components/LikeButton.jsx", "../components/BookmarkButton.jsx", "../components/UserAvatar.jsx", "../components/State/LoadingState.jsx", "../components/State/ErrorState.jsx", "react", "react-router-dom", "date-fns"], "external_methods": ["useParams", "useNavigate", "Link", "formatDistanceToNow", "getSupabaseClient", "useAuth"], "published": ["NoteDetails"], "classes": [], "methods": [{"name": "fetchNote", "description": "Fetches note data from the 'notes' table in Supabase using note ID from URL parameters."}, {"name": "safeUpdateCounts(patch)", "description": "Optimistically updates local note state and persists the count updates to the database; refetches on error.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "handleLike()", "description": "Handles liking the note by incrementing the likes count.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "handleBookmark()", "description": "Handles bookmarking the note by incrementing the bookmarks count.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "handleDownload()", "description": "Handles downloading the PDF by generating a signed URL and triggering browser download; also updates downloads count.", "scope": "NoteDetails", "scopeKind": "function"}, {"name": "NoteDetails()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["supabase.from('notes').select(*)", "supabase.from('notes').update()", "supabase.storage.from('notes').createSignedUrl()", "navigate('/browse')", "setNote()", "setLoading()", "setErr()", "formatDistanceToNow()", "...", "// plus various React hooks and utility functions"], "search-terms": ["NoteDetails.jsx", "PDF preview", "Supabase signed URL", "note metadata", "like button", "bookmark button", "download PDF", "fetch note", "React component", "note ID route param"], "state": 2, "file_id": 46, "knowledge_revision": 156, "git_revision": "4fa805952bc51f2f89db2b3305d1f7c881145f49", "revision_history": [{"104": ""}, {"113": "35c40cd7841f75d3b4b8648c69716d56469d4188"}, {"114": "35c40cd7841f75d3b4b8648c69716d56469d4188"}, {"156": "4fa805952bc51f2f89db2b3305d1f7c881145f49"}], "ctags": [{"_type": "tag", "name": "600", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            signedSeconds={600}$/", "language": "JavaScript", "kind": "field", "scope": "signedSeconds", "scopeKind": "class"}, {"_type": "tag", "name": "720", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            height={720}$/", "language": "JavaScript", "kind": "field", "scope": "height", "scopeKind": "class"}, {"_type": "tag", "name": "NoteDetails", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^export default function NoteDetails() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "handleBookmark", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function handleBookmark() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteDetails", "scopeKind": "function"}, {"_type": "tag", "name": "handleDownload", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function handleDownload() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteDetails", "scopeKind": "function"}, {"_type": "tag", "name": "handleLike", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function handleLike() {$/", "language": "JavaScript", "kind": "function", "signature": "()", "scope": "NoteDetails", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^              noteId={note.id}$/", "language": "JavaScript", "kind": "field", "scope": "noteId", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            fileName={note.title ? `${note.title}.pdf` : 'note.pdf'}$/", "language": "JavaScript", "kind": "field", "scope": "fileName", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^            path={note.pdf_path}$/", "language": "JavaScript", "kind": "field", "scope": "path", "scopeKind": "class"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^          {note?.user_id ? <UserAvatar userId={note.user_id} size={44} \\/> : null}$/", "language": "JavaScript", "kind": "field", "scope": "note.user_id", "scopeKind": "class"}, {"_type": "tag", "name": "safeUpdateCounts", "path": "/home/kavia/workspace/code-generation/study-notes-hub-171069-171078/react_frontend/src/pages/NoteDetails.jsx", "pattern": "/^  async function safeUpdateCounts(patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(patch)", "scope": "NoteDetails", "scopeKind": "function"}], "hash": "7b5a6c725ade41e0c9cf6b4f033d660e", "format-version": 4, "code-base-name": "react_frontend", "filename": "react_frontend/src/pages/NoteDetails.jsx", "fields": [{"name": "signedSeconds={600}", "scope": "signedSeconds", "scopeKind": "class", "description": "unavailable"}, {"name": "height={720}", "scope": "height", "scopeKind": "class", "description": "unavailable"}, {"name": "noteId={note.id}", "scope": "noteId", "scopeKind": "class", "description": "unavailable"}, {"name": "fileName={note.title ? `${note.title}.pdf` : 'note.pdf'}", "scope": "fileName", "scopeKind": "class", "description": "unavailable"}, {"name": "path={note.pdf_path}", "scope": "path", "scopeKind": "class", "description": "unavailable"}, {"name": "{note?.user_id ? <UserAvatar userId={note.user_id} size={44} \\/> : null}", "scope": "note.user_id", "scopeKind": "class", "description": "unavailable"}]}